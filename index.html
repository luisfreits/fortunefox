<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Fox</title>
<style>
        * {
            margin: 0;
            padding: 0;
        }
        
        body {
            margin: 0;
            padding: 0;
        }

        .tela{
            display: none;
        }

        .tela.ativa{
            display: block;
        }
        
        #fundo {
            background: url('src/background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        #loginHome{
            background-color: black;
            opacity: 95%;
            height: 90vh;
            width: 50vw;
            display: flex;
            justify-content: center;
            border-radius: 15px;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        #logoLogin img{
           width: 200px;
           height: auto;
        }
        #logoHome img{
            width: 50px;
            height: auto;
        }
        #loginBox{
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 300px;
        }
        #user, #senha{
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            font-size: 16px;
            box-sizing: border-box;
        }
        #botaoLogin{
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            border: none;
            background-color: #4caf50;
            cursor:pointer;
            transition: background-color 0.3s;
        }
        #botaoLogin:hover{
            background-color: #45a049;
            transform: scale(1.05);
        }

        #home{
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            border-radius: 15px;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        #mascara {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.8);
            z-index: 0;
        }
        #header{
            width: 100%;
            position: fixed;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-sizing: border-box;
            color: white;
            padding: 15px 20px;
            background-color: transparent;
            top: 0;
            left: 0;
        }
        #fundoGrid{
            display: flex;
            justify-content: center;
            align-items: center;
            width: 80vw;
            height: 80vh;
            margin: 0 auto;
            padding: 20px;
            border-radius:15px;
            background-color:black;
            opacity: 0.8;
            z-index: 1;
            position: fixed;
            top: 8.25%;
            left: 9.25%;
        }
        .grid-2x2 {
            position: static !important;
            border: none !important;
            background: none !important;
            box-shadow: none !important;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            z-index:2;
            position: fixed;
            top: 20%;
            left: 20%;
            border-color:white;
            border-style: solid;
            border-width: 1px;
        }
        .grid-2x2 button{
            border: 10px solid rgb(134, 134, 134);
            border-radius: 10px;
            width: 30vw;
            height: 30vh;
            font-size: 40px;
            color:crimson;
            background-color:rgb(156, 156, 156);
            z-index:2;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
        }
        .grid-2x2 button:hover {
            transform: scale(1.05);
            background-color: rgb(200, 200, 200);
        }

        #financeiroJogos {
            position: fixed;
            top: 60px;
            left: 50px;
            width: 200px;
            height: 250px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
            font-family: sans-serif;
            display: none;
        }
        #tituloSaldo {
            font-size: 48px;
            margin-bottom: 10px;
            text-align: center;
        }
        #saldo {
            font-size: 24px;
            margin-top: 40px;
        }
        #valorAposta {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
            border: 1px solid #000;
            font-size: 16px;
            box-sizing: border-box;
        }
        #txtValorApostando {
            font-size: 16px;
            margin-top: 8px;
            justify-self: center;
        }

        .botao-roleta {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 8px;
            margin: 10px;
        }
        .botao-roleta:hover {
            transform: scale(1.05);
            background-color: #45a049;
        }
        .botao-roleta:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        /* Estilos espec√≠ficos do foguetinho */
        #foguetinho {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 15px;
            color: white;
            font-family: sans-serif;
        }

        #painelFoguetinho {
            position: fixed;
            top: 60px;
            left: 50px;
            width: 200px;
            height: 300px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
            font-family: sans-serif;
            display: none;
        }

        #painelFoguetinho #tituloSaldoFoguetinho {
            font-size: 32px;
            margin-bottom: 10px;
            text-align: center;
        }

        #painelFoguetinho #saldoFoguetinho {
            font-size: 20px;
            margin-bottom: 20px;
        }

        #painelFoguetinho #valorApostaFoguetinho {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            border: 1px solid #000;
            font-size: 16px;
            box-sizing: border-box;
        }

        #painelFoguetinho .botao-aposta-foguetinho {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            color: white;
            font-size: 14px;
            border: none;
            background-color: #4caf50;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #painelFoguetinho .botao-aposta-foguetinho:hover {
            background-color: #45a049;
        }

        #multiplicadorDisplay {
            font-size: 80px;
            font-weight: bold;
            color: #ffeaa7;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #multiplicadorDisplay.crash {
            color: #ff6b6b;
            animation: crashAnimation 0.5s ease-out;
        }

        @keyframes crashAnimation {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        #statusFoguetinho {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
            min-height: 30px;
        }

        .botao-foguetinho {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            background-color: #4caf50;
            color: white;
            border: none;
            border-radius: 8px;
            margin: 10px;
        }

        .botao-foguetinho:hover {
            transform: scale(1.05);
            background-color: #45a049;
        }

        .botao-foguetinho:disabled {
            background-color: #666;
            cursor: not-allowed;
            transform: none;
        }

        #botaoParar {
            background-color: #ff6b6b;
        }

        #botaoParar:hover {
            background-color: #ff5252;
        }
        @media (max-width: 900px) {
            #loginHome {
                width: 90vw;
                height: auto;
                min-height: 60vh;
                padding: 10px;
            }
            #fundoGrid {
                width: 98vw;
                height: 90vh;
                left: 1vw;
                top: 7vh;
                padding: 5px;
            }
            .grid-2x2 button {
                width: 40vw;
                height: 20vh;
                font-size: 24px;
            }
            .grid-2x2 {
                top: 18%;
                left: 5%;
                width: 90vw;
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                position: fixed;
            }
            #financeiroJogos, #painelFoguetinho {
                left: 5vw;
                top: 70px;
                width: 90vw;
                max-width: 350px;
                min-width: 200px;
                padding: 10px;
            }
            #foguetinho {
                width: 95vw;
                max-width: 400px;
                padding: 10px;
            }
            #multiplicadorDisplay {
                font-size: 48px;
                min-height: 60px;
            }
        }

        @media (max-width: 600px) {
            #loginHome {
                width: 98vw;
                min-height: 60vh;
                padding: 5px;
            }
            #fundoGrid {
                width: 99vw;
                height: 95vh;
                left: 0.5vw;
                top: 2vh;
                padding: 2px;
            }
            .grid-2x2 {
                width: 98vw;
                left: 1vw;
                top: 10vh;
                grid-template-columns: 1fr;
                gap: 6px;
                position: fixed;
            }
            .grid-2x2 button {
                width: 90vw;
                height: 12vh;
                font-size: 18px;
            }
            #header {
                flex-direction: column;
                gap: 10px;
                padding: 8px 5px;
                font-size: 14px;
            }
            #financeiroJogos, #painelFoguetinho {
                left: 2vw;
                width: 96vw;
                max-width: 98vw;
                min-width: 150px;
                padding: 5px;
            }
            #foguetinho {
                width: 98vw;
                max-width: 98vw;
                padding: 5px;
            }
            #multiplicadorDisplay {
                font-size: 32px;
                min-height: 40px;
            }
        }
        
        #roleta canvas {
            width: 100% !important;
            height: auto !important;
            max-width: 400px;
            max-height: 400px;
            display: block;
            margin: 0 auto;
        }

        @media (max-width: 600px) {
            #roleta canvas {
                max-width: 95vw;
                max-height: 60vw;
            }
        }

        .roleta-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
            border-radius: 15px;
            color: white;
            font-family: sans-serif;
            box-shadow: 0 0 20px #0008;
        }

        #apostar {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            color: white;
            font-size: 14px;
            border: none;
            background-color: #4caf50;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        #apostar:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
<div id="telaLogin" class="tela ativa">
    <div id="fundo">
        <div id="loginHome">
            <div id="logoLogin"><img src="src/logo-png.png" alt="tipografia"></div>
            <div id="loginBox">
                <input type="text" name="user" id="user" placeholder="Usu√°rio">
                <input type="password" name="senha" id="senha" placeholder="Senha">
                <button id="botaoLogin" onclick="logar()">Entrar</button> 
            </div>
        </div>
    </div>
</div>
<div id="doomContainer" style="display: none; position: fixed; top: 10%; left: 10%; width: 80vw; height: 80vh; z-index: 9999; background: black;">
    <button onclick="document.getElementById('doomContainer').style.display='none'" 
style="position:absolute; top:10px; right:10px; z-index:10000;">Fechar</button>
    <iframe src="https://js-dos.com/games/doom.exe.html" width="100%" height="100%"></iframe>
</div>
<div id="telaHome" class="tela">
    <div id="fundo">
        <div id="home">
            <div id="header">
                <div id="logoHome">
                    <img src="src/logo-png.png" alt="logo">
                </div>
                <div id="userInfo">
                    Bem-vindo, <span id="nomeUsuario">Usu√°rio</span>!
                    <button id="botaoSair" onclick="voltar()">Voltar</button>
                </div>
            </div>
            <div id="conteudoHome">
                <div id="mascara"></div>
                <div id="fundoGrid"></div>
                <div id="bloco-jogos" style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 0 auto; width: 100%;">
                    <div class="grid-2x2" style="position: static; border: none; background: none; box-shadow: none;">
                        <button id="btRoleta" onclick="roleta()">ROLETA</button>
                        <button id="btFoguete" onclick="foguetinho()">FOGUETINHO</button>
                    </div>
                </div>
            </div>
            <div id="roleta"></div>
            <div id="foguetinho">
                <div id="multiplicadorDisplay">0.00x</div>
                <div id="statusFoguetinho">Fa√ßa sua aposta e clique em "Decolar"!</div>
                <div>
                    <button id="botaoDecolar" class="botao-foguetinho" onclick="iniciarFoguetinho()">Decolar</button>
                    <button id="botaoParar" class="botao-foguetinho" onclick="pararFoguetinho()" disabled>Parar</button>
                    <button id="botaoNovoJogo" class="botao-foguetinho" onclick="resetarFoguetinho()" style="display: none;">Novo Jogo</button>
                </div>
            </div>
            <div id="painelFoguetinho">
                <div id="tituloSaldoFoguetinho">Saldo</div>
                <div id="saldoFoguetinho"></div>
                <input type="text" id="valorApostaFoguetinho" placeholder="Valor da aposta">
                <button class="botao-aposta-foguetinho" onclick="apostarFoguetinho()">Apostar</button>
                <div style="font-size: 14px; margin-top: 10px;">Valor apostado:</div>
                <div id="valorApostadoFoguetinho" style="font-size: 16px; font-weight: bold;"></div>
            </div>
            <div id="financeiroJogos">
                <div id="tituloSaldo">Saldo</div>
                <div id="saldo"></div>
                <input type="text" id="valorAposta" placeholder="Valor da aposta">
                <button id="apostar" onclick="apostar(0)">Apostar</button>
                <div style="font-size: 14px; margin-top: 10px;">Valor apostado:</div>
                <div id="valorApostando" style="font-size: 16px; font-weight: bold;"></div>
            </div>
        </div>
    </div>
</div>
<script>
    var telaAtual = 0
    var saldo = 1000.00;
    var totalAposta = 0.00;
    var foguetinhoAtivo = false;
    var multiplicadorAtual = 0.00;
    var intervalFoguetinho = null;
    var apostouFoguetinho = false;
    var valorApostadoFoguetinho = 0.00;
    document.getElementById("valorAposta").addEventListener("input", function(e) {
        let input = e.target;
        let valor = input.value.replace(/\D/g, "");
        valor = (parseInt(valor, 10) / 100).toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        });
        input.value = `$ ${valor}`;
    });
    document.getElementById("valorApostaFoguetinho").addEventListener("input", function(e) {
        let input = e.target;
        let valor = input.value.replace(/\D/g, "");
        valor = (parseInt(valor, 10) / 100).toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        });
        input.value = `$ ${valor}`;
    });
    function logar(){ /*vai verificar se preencheu user e senha, depois vai mudar de tela*/
        const user = document.getElementById(`user`).value;
        const senha = document.getElementById(`senha`).value
        if(user && senha){
            document.getElementById(`nomeUsuario`).textContent = user
            document.getElementById(`telaLogin`).classList.remove(`ativa`);
            document.getElementById(`telaHome`).classList.add(`ativa`);
            telaAtual = 1;
        }else{alert("Usu√°rio ou senha inv√°lidos!")}
    }
    function voltar(){ /*vai mudar o valor da variavel de tela inicial e com isso mudar tbm a tela*/
        if (telaAtual==1) {
            document.getElementById(`telaHome`).classList.remove(`ativa`);
            document.getElementById(`telaLogin`).classList.add(`ativa`);
            document.getElementById(`user`).value = ``;
            document.getElementById(`senha`).value = ``;
            telaAtual = 0;
        }
        else {
            document.getElementById(`financeiroJogos`).style.display = "none";
            document.getElementById(`painelFoguetinho`).style.display = "none";
            if (telaAtual==2) {
                document.getElementById(`roleta`).innerHTML = ``;
                mostrarGrid();
                telaAtual = 1;
            }
            else if (telaAtual==3) {
                if (foguetinhoAtivo) {
                    clearInterval(intervalFoguetinho);
                    foguetinhoAtivo = false;
                }
                document.getElementById(`foguetinho`).style.display = "none";
                resetarFoguetinho();
                mostrarGrid();
                telaAtual = 1;
            }
        }
    }
    function ocultarGrid(){
        document.getElementById(`fundoGrid`).style.display = `none`;
        const grids = document.getElementsByClassName(`grid-2x2`);
        for (let grid of grids) {
            grid.style.display = `none`;
        }
    }
    function mostrarGrid(){
        document.getElementById(`fundoGrid`).style.display = `flex`;
        const grids = document.getElementsByClassName(`grid-2x2`);
        for (let grid of grids) {
            grid.style.display = `grid`;
        }
    }
    function atualizarSaldo() {
        document.getElementById("saldo").textContent = `$ ${saldo.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        })}`;
        document.getElementById("valorApostando").textContent = `$ ${totalAposta.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        })}`;
    }
    function atualizarSaldoFoguetinho() {
        document.getElementById("saldoFoguetinho").textContent = `$ ${saldo.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        })}`;
        document.getElementById("valorApostadoFoguetinho").textContent = `$ ${valorApostadoFoguetinho.toLocaleString("pt-BR", {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2
        })}`;
    }
    atualizarSaldo();
    atualizarSaldoFoguetinho();
    function apostar(funcao) {
        const valorAposta = document.getElementById("valorAposta").value;
        const valorNumerico = parseFloat(valorAposta.replace(/[^0-9,-]+/g, "").replace(",", "."));
        if (funcao == 0) {
            if (isNaN(valorNumerico) || valorNumerico <= 0) {
                alert("Por favor, insira um valor v√°lido para a aposta.");
                return;
            }
            if (valorNumerico > saldo) {
                alert("Saldo insuficiente para realizar esta aposta.");
                return;
            }
            saldo -= valorNumerico;
            totalAposta += valorNumerico;
            atualizarSaldo();
            atualizarSaldoFoguetinho();
            document.getElementById("valorAposta").value = `$ 0,00`;
            alert(`Aposta de R$ ${valorNumerico.toFixed(2)} realizada com sucesso!`);
        } else if (funcao == 1) {
            if (totalAposta <= 0) {
                alert("N√£o h√° valor apostado para retirar.");
                return;
            }
            saldo += totalAposta;
            totalAposta = 0;
            atualizarSaldo();
            atualizarSaldoFoguetinho();
            document.getElementById("valorAposta").value = `$ 0,00`;
            alert("Valor apostado transferido para o saldo!");
        }
    }
    function foguetinho(){
        telaAtual = 3;
        ocultarGrid();
        document.getElementById("painelFoguetinho").style.display = "block";
        document.getElementById("foguetinho").style.display = "flex";
        resetarFoguetinho();
        atualizarSaldoFoguetinho();
    }
    function resetarFoguetinho() {
        foguetinhoAtivo = false;
        multiplicadorAtual = 0.00;
        apostouFoguetinho = false;
        if (intervalFoguetinho) {
            clearInterval(intervalFoguetinho);
            intervalFoguetinho = null;
        }
        document.getElementById("multiplicadorDisplay").textContent = "0.00x";
        document.getElementById("multiplicadorDisplay").classList.remove("crash");
        document.getElementById("statusFoguetinho").textContent = "Fa√ßa sua aposta e clique em 'Decolar'!";
        document.getElementById("botaoDecolar").disabled = false;
        document.getElementById("botaoParar").disabled = true;
        document.getElementById("botaoNovoJogo").style.display = "none";
    }
    function iniciarFoguetinho() {
        if (valorApostadoFoguetinho <= 0) {
            alert("Voc√™ precisa fazer uma aposta primeiro!");
            return;
        }
        if (foguetinhoAtivo) return;
        foguetinhoAtivo = true;
        apostouFoguetinho = true;
        multiplicadorAtual = 0.00;
        document.getElementById("botaoDecolar").disabled = true;
        document.getElementById("botaoParar").disabled = false;
        document.getElementById("statusFoguetinho").textContent = "Foguete decolando... Clique em 'Parar' para sacar!";
        intervalFoguetinho = setInterval(() => {
            multiplicadorAtual += 0.05;
            multiplicadorAtual = Math.round(multiplicadorAtual * 100) / 100;
            document.getElementById("multiplicadorDisplay").textContent = multiplicadorAtual.toFixed(2) + "x";
            const crashChance = Math.random();
            if (crashChance < 0.1
                5 || multiplicadorAtual >= 10.00) {
                crashFoguetinho();
            }
        }, 800);
    }
    function pararFoguetinho() {
        if (!foguetinhoAtivo || !apostouFoguetinho) return;
        clearInterval(intervalFoguetinho);
        foguetinhoAtivo = false;
        const ganho = valorApostadoFoguetinho * multiplicadorAtual;
        saldo += ganho;
        valorApostadoFoguetinho = 0;
        document.getElementById("statusFoguetinho").textContent = 
            `Parab√©ns! Voc√™ ganhou $ ${ganho.toFixed(2)} (${multiplicadorAtual.toFixed(2)}x)!`;
        document.getElementById("botaoParar").disabled = true;
        document.getElementById("botaoNovoJogo").style.display = "inline-block";
        atualizarSaldo();
        atualizarSaldoFoguetinho();
        alert(`Voc√™ sacou no multiplicador ${multiplicadorAtual.toFixed(2)}x e ganhou $ ${ganho.toFixed(2)}!`);
    }
    let contadorCliqueLogo = 0;
    document.getElementById("logoHome").addEventListener("click", function() {
        contadorCliqueLogo++;

        if (contadorCliqueLogo >= 10) {
            contadorCliqueLogo = 0; // reseta o contador depois
            window.open("https://js-dos.com/games/doom.exe.html", "_blank");
            alert("DOOM liberado! üöÄ");
        }
    });
    function crashFoguetinho() {
        clearInterval(intervalFoguetinho);
        foguetinhoAtivo = false;
        document.getElementById("multiplicadorDisplay").classList.add("crash");
        document.getElementById("statusFoguetinho").textContent = 
            `CRASH! O foguete explodiu em ${multiplicadorAtual.toFixed(2)}x. Voc√™ perdeu $ ${valorApostadoFoguetinho.toFixed(2)}.`;
        valorApostadoFoguetinho = 0;
        document.getElementById("botaoParar").disabled = true;
        document.getElementById("botaoNovoJogo").style.display = "inline-block";
        atualizarSaldo();
        atualizarSaldoFoguetinho();
        alert(`CRASH! O foguete explodiu em ${multiplicadorAtual.toFixed(2)}x. Voc√™ perdeu sua aposta!`);
    }
    async function roleta(){
        telaAtual = 2;
        ocultarGrid();
        document.getElementById("financeiroJogos").style.display = "block";
        let premios = ["-10%", "+10%", "-20%", "+20%", "-35%", "+35%", "-50%", "+50%", "-100%", "+100%"]
        let positivos = 0;
        let idx = 0;
        while (idx < premios.length) {
            if (premios[idx].includes("+")) positivos++;
            idx++;
        }
        console.log("Pr√™mios positivos:", positivos);
        premios.forEach(function(premio, i) {
            console.log(`Pr√™mio ${i + 1}: ${premio}`);
        });
        function criarRoleta(containerId, opcoes = {}, duracao) {
            const {width, height, items, colors, buttonLabel, zIndex} = opcoes;
            const container = document.getElementById(containerId);
            if (!container) return console.error("Cont√™iner da roleta n√£o encontrado:", containerId);
            container.innerHTML = `
                <div class="roleta-container" style="z-index: ${zIndex}; position: relative;">
                    <canvas width="${width}px" height="${height}px" style="margin-bottom: 10px;"></canvas><br/>
                    <button class="botao-roleta">${buttonLabel}</button>
                </div>
            `;
            const canvas = container.querySelector("canvas");
            const button = container.querySelector("button");
            const ctx = canvas.getContext("2d");
            const raio = width / 2;
            let anguloAtual = 0;
            let girando = false;
            function desenharRoleta() {
                const anguloPorSegmento = 2 * Math.PI / items.length;
                ctx.clearRect(0, 0, width, height);
                for (let i = 0; i < items.length; i++) {
                    const anguloInicio = anguloAtual + i * anguloPorSegmento;
                    const anguloFim = anguloInicio + anguloPorSegmento;
                    ctx.beginPath();
                    ctx.moveTo(raio, raio);
                    ctx.arc(raio, raio, raio, anguloInicio, anguloFim);
                    ctx.fillStyle = colors[i % colors.length];
                    ctx.fill();
                    ctx.save();
                    ctx.translate(raio, raio);
                    ctx.rotate(anguloInicio + anguloPorSegmento / 2);
                    ctx.textAlign = "right";
                    ctx.fillStyle = colors[i % colors.length *(-1) +1];
                    ctx.font = "bold 40px sans-serif";
                    ctx.fillText(items[i], raio - 50, 10);
                    ctx.restore();
                }
                ctx.fillStyle = "#000";
                ctx.beginPath();
                ctx.moveTo(raio, 10);
                ctx.lineTo(raio - 10, 30);
                ctx.lineTo(raio + 10, 30);
                ctx.closePath();
                ctx.fill();
            }
            desenharRoleta();
            return function girar() {
                return new Promise(resolve => {
                    if (girando) return;
                    girando = true;
                    const DURACAO = duracao;
                    const inicio = performance.now();
                    const velocidadeInicial = Math.random() * 0.15 + 0.5;
                    function animar(now) {
                        const tempoDecorrido = now - inicio;
                        const tempoRestante = DURACAO - tempoDecorrido;
                        let fator = tempoRestante / DURACAO;
                        if (fator < 0) fator = 0;
                        let velocidade = velocidadeInicial * fator * fator;
                        anguloAtual += velocidade;
                        anguloAtual %= 2 * Math.PI;
                        desenharRoleta();
                        if (tempoDecorrido < DURACAO) requestAnimationFrame(animar);
                        else {
                            girando = false;
                            const anguloPorSegmento = 2 * Math.PI / items.length;
                            const indice = Math.floor(((3 * Math.PI / 2 - anguloAtual + 2 * Math.PI) % (2 * Math.PI)) / anguloPorSegmento);
                            const resultado = items[indice];
                            resolve(resultado);
                        }
                    }
                    requestAnimationFrame(animar);
                })
            }
        }
        let screenW = Math.min(window.innerWidth, window.innerHeight);
        let diametro = screenW > 500 ? 400 : Math.floor(screenW * 0.9);
        let girarRoleta = criarRoleta("roleta", {
            width: diametro,
            height: diametro,
            items: premios,
            colors: ["#0f0f0f", "#ffeaa7"],
            buttonLabel: "Tentar a sorte",
            zIndex: 1000
        }, 8000);
        const botao = document.querySelector("#roleta button");
        botao.addEventListener("click", async () => {
            const resultado = await girarRoleta();
            const evento = new CustomEvent("roleta-finalizada", {detail: resultado});
            document.dispatchEvent(evento);
        });
        document.addEventListener("roleta-finalizada", (e) => {
            const resultado = e.detail;
            let percentual = parseFloat(resultado.replace("%", ""));
            if (isNaN(percentual)) percentual = 0;
            if (totalAposta > 0) {
                let valorFinal = totalAposta + (totalAposta * percentual / 100);
                let diferenca = valorFinal - totalAposta;
                saldo += valorFinal;
                totalAposta = 0;
                atualizarSaldo();
                atualizarSaldoFoguetinho();
                alert(`Voc√™ ${percentual < 0 ? "perdeu" : "ganhou"} ${Math.abs(percentual)}% da sua aposta!`);
            }
        });
    }
    function apostarFoguetinho() {
        const input = document.getElementById("valorApostaFoguetinho").value;
        const valorNumerico = parseFloat(input.replace(/[^0-9,-]+/g, "").replace(",", "."));
        if (isNaN(valorNumerico) || valorNumerico <= 0) {
            alert("Por favor, insira um valor v√°lido para a aposta.");
            return;
        }
        if (valorNumerico > saldo) {
            alert("Saldo insuficiente para realizar esta aposta.");
            return;
        }
        saldo -= valorNumerico;
        valorApostadoFoguetinho = valorNumerico;
        atualizarSaldo();
        atualizarSaldoFoguetinho();
        document.getElementById("valorApostaFoguetinho").value = `$ 0,00`;
        alert(`Aposta de R$ ${valorNumerico.toFixed(2)} realizada com sucesso!`);
    }
</script>
</body>
</html>
